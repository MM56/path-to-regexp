function pathToRegexp(e,r,n){r=r||[],n=n||{};var t=n.strict,a=n.end!==!1,i=n.sensitive?"":"i",p=0;if(e instanceof RegExp){var u=e.source.match(/\((?!\?)/g)||[];return r.push.apply(r,u.map(function(e,r){return{name:r,delimiter:null,optional:!1,repeat:!1}})),e}if(Array.isArray(e))return e=e.map(function(e){return pathtoRegexp(e,r,n).source}),new RegExp("(?:"+e.join("|")+")",i);var o=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g");e=e.replace(o,function(e,n,t,a,i,u,o,c){if(n)return n;if(c)return"\\"+c;var l="+"===o||"*"===o,s="?"===o||"*"===o;return r.push({name:a||p++,delimiter:t||"/",optional:s,repeat:l}),t=t?"\\"+t:"",i=escapeGroup(i||u||"[^"+(t||"\\/")+"]+?").replace(/([=!:$\/()])/g,"\\$1"),l&&(i=i+"(?:"+t+i+")*"),s?"(?:"+t+"("+i+"))?":t+"("+i+")"});var c="/"===e[e.length-1];return t||(e=(c?e.slice(0,-2):e)+"(?:\\/(?=$))?"),a||(e+=t&&c?"":"(?=\\/|$)"),new RegExp("^"+e+(a?"$":""),i)}